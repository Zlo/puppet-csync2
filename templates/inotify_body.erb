#!/bin/bash

#Managed by puppet

#This is a basic shell script to sync a set of folders for csync2
#Uses inotify to sync when necessary (On file modifications or additions)

while true; do
	inotifywait -qq \
<% syncfolders.sort.each do |folders| -%>
<% folders.each do |incdir| -%>
	-r <%= incdir %> \
<% end -%>
<% end -%>
	-e modify -e attrib -e close_write -e move -e create -e delete 

	#Sleep if necessary
	sleep <%= sleeptimer %>

	#Run csync2
	csync2 -x

done
